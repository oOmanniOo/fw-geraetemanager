{% extends "base.html" %}

{% block title %}Gerätendetails{% endblock %}

{% block content %}

<h2 class="mb-4">{{ object.bezeichnung }}</h2>
<div class="card">
  <div class="card-body">
    <p class="mb-2"><strong>Identifikation:</strong> {{ object.identifikation }}</p>
    <p class="mb-2"><strong>Seriennummer:</strong> {{ object.seriennummer }}</p>
    <p class="mb-2"><strong>Status:</strong> {{ object.status }}</p>
    <p class="mb-2"><strong>Fahrzeug:</strong> {{ object.fahrzeug }}</p>
    <p class="mb-3"><strong>Bemerkung:</strong> {{ object.bemerkung }}</p>
    <div class="d-flex gap-2">
      <a href="{% url 'geraete:geraete_bearbeiten' object.pk %}" class="btn btn-primary btn-sm">Bearbeiten</a>
      <a href="{% url 'geraete:geraete_loeschen' object.pk %}" class="btn btn-outline-danger btn-sm">Löschen</a>
      <a href="{% url 'geraete:geraete_liste' %}" class="btn btn-secondary btn-sm">Zurück zur Liste</a>
    </div>
  </div>
</div>

 <h3>Prüfungen</h3>
  {% if pruefungen %}
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Datum</th>
          <th>Art</th>
          <th>Prüfer</th>
          <th>Status</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody>
        {% for pruefung in pruefungen %}
          <tr>
            <td>{{ pruefung.datum }}</td>
            <td>{{ pruefung.art }}</td>
            <td>{{ pruefung.pruefer }}</td>
            <td>
              {% if pruefung.bestanden %}
                <span class="badge bg-success">Bestanden</span>
              {% else %}
                <span class="badge bg-danger">Nicht bestanden</span>
              {% endif %}
            </td>
            <td>
              <a href="" class="btn btn-sm btn-primary">
                Details
              </a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Keine Prüfungen vorhanden.</p>
  {% endif %}

  <a href="{% url 'pruefungen:start_pruefung' geraet.id %}" class="btn btn-danger mt-3">Neue Prüfung starten</a>
</div>
{% endblock %}
